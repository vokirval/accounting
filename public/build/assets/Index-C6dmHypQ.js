import{d as O,t as Qe,e as T,w as d,n as Q,u as t,o as r,r as N,k as re,x as Xe,m as Ne,a as o,q as ne,g as p,j as C,y as Fe,z as Se,U as ge,H as Ze,c as l,h as et,b as a,f,D as te,F as h,E as U,p as c,A as F,B as S,l as tt,v as pe,I as st,J as at}from"./app-B51EkuFe.js";import{T as ot,f as J,g as K,h as W,_ as rt,t as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-CZKosmsv.js";import{_ as nt}from"./index-DHpKv-5D.js";import{P as _e,_ as B}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C4RciV_5.js";import{C as lt,_ as be}from"./Checkbox.vue_vue_type_script_setup_true_lang-CHhYvLZf.js";import{u as dt}from"./useForwardPropsEmits-BgNW2eW0.js";import{c as it,b as ut,P as pt}from"./VisuallyHidden-BAdNgx5c.js";import{u as _t,a as ce,b as ct}from"./useForwardExpose-D6ozKue2.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-BxjNIR_C.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-B9cUkFkU.js";import{C as ft,_ as he,a as ke,b as we,c as Ce,d as qe,e as Ve,f as $e}from"./DrawerTitle.vue_vue_type_script_setup_true_lang-lzS4KhlN.js";import{c as se}from"./loader-circle-Mr4QYG0N.js";import"./index-SJdF8OKo.js";import"./index-B26eXW15.js";const[Re,mt]=it("CollapsibleRoot");var xt=O({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(q,{expose:k,emit:_}){const g=q,V=_t(g,"open",_,{defaultValue:g.defaultOpen,passive:g.open===void 0}),{disabled:P,unmountOnHide:I}=Qe(g);return mt({contentId:"",disabled:P,open:V,unmountOnHide:I,onOpenToggle:()=>{P.value||(V.value=!V.value)}}),k({open:V}),ce(),(H,X)=>(r(),T(t(_e),{as:H.as,"as-child":g.asChild,"data-state":t(V)?"open":"closed","data-disabled":t(P)?"":void 0},{default:d(()=>[Q(H.$slots,"default",{open:t(V)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),yt=xt,vt=O({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(q,{emit:k}){const _=q,g=k,v=Re();v.contentId||=ut(void 0,"reka-collapsible-content");const V=N(),{forwardRef:P,currentElement:I}=ce(),H=N(0),X=N(0),ae=C(()=>v.open.value),u=N(ae.value),E=N();re(()=>[ae.value,V.value?.present],async()=>{await Xe();const b=I.value;if(!b)return;E.value=E.value||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const M=b.getBoundingClientRect();X.value=M.height,H.value=M.width,u.value||(b.style.transitionDuration=E.value.transitionDuration,b.style.animationName=E.value.animationName)},{immediate:!0});const D=C(()=>u.value&&v.open.value);return Ne(()=>{requestAnimationFrame(()=>{u.value=!1})}),ct(I,"beforematch",b=>{requestAnimationFrame(()=>{v.onOpenToggle(),g("contentFound")})}),(b,M)=>(r(),T(t(pt),{ref_key:"presentRef",ref:V,present:b.forceMount||t(v).open.value,"force-mount":!0},{default:d(({present:w})=>[o(t(_e),ne(b.$attrs,{id:t(v).contentId,ref:t(P),"as-child":_.asChild,as:b.as,hidden:w?void 0:t(v).unmountOnHide.value?"":"until-found","data-state":D.value?void 0:t(v).open.value?"open":"closed","data-disabled":t(v).disabled?.value?"":void 0,style:{"--reka-collapsible-content-height":`${X.value}px`,"--reka-collapsible-content-width":`${H.value}px`}}),{default:d(()=>[!t(v).unmountOnHide.value||w?Q(b.$slots,"default",{key:0}):p("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]),_:3},8,["present"]))}}),gt=vt,bt=O({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(q){const k=q;ce();const _=Re();return(g,v)=>(r(),T(t(_e),{type:g.as==="button"?"button":void 0,as:g.as,"as-child":k.asChild,"aria-controls":t(_).contentId,"aria-expanded":t(_).open.value,"data-state":t(_).open.value?"open":"closed","data-disabled":t(_).disabled?.value?"":void 0,disabled:t(_).disabled?.value,onClick:t(_).onOpenToggle},{default:d(()=>[Q(g.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"]))}}),ht=bt;const Y=se("ClipboardIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);const kt=se("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const wt=se("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Ct=se("PaperclipIcon",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);const qt=se("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),G=O({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(q){const k=q;return(_,g)=>(r(),T(t(ot),Fe(Se(k)),{default:d(()=>[Q(_.$slots,"default")]),_:3},16))}}),Ue=O({__name:"Collapsible",props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(q,{emit:k}){const v=dt(q,k);return(V,P)=>(r(),T(t(yt),ne({"data-slot":"collapsible"},t(v)),{default:d(I=>[Q(V.$slots,"default",Fe(Se(I)))]),_:3},16))}}),Vt=O({__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(q){const k=q;return(_,g)=>(r(),T(t(gt),ne({"data-slot":"collapsible-content"},k),{default:d(()=>[Q(_.$slots,"default")]),_:3},16))}}),$t=O({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{}},setup(q){const k=q;return(_,g)=>(r(),T(t(ht),ne({"data-slot":"collapsible-trigger"},k),{default:d(()=>[Q(_.$slots,"default")]),_:3},16))}}),Ut={class:"flex flex-col gap-6 p-4"},Bt={class:"rounded-xl border border-sidebar-border/70 bg-white p-4 dark:border-sidebar-border dark:bg-neutral-900"},Nt={class:"flex flex-wrap items-center justify-between gap-4"},Ft={class:"flex flex-wrap items-center gap-2"},St={class:"mb-3 space-y-1.5 rounded-lg border border-border/60 bg-muted/20 p-3"},Rt={class:"flex flex-wrap gap-1.5"},Mt=["onClick"],Tt={class:"grid grid-cols-2 gap-2.5 md:grid-cols-4"},Pt={class:"grid gap-1.5"},It=["value"],Dt={class:"grid gap-1.5"},Lt=["value"],Ot={class:"grid gap-1.5"},Ht=["value"],Et={class:"grid gap-1.5"},jt=["value"],zt={class:"grid gap-1.5"},At=["value"],Jt={class:"grid gap-1.5"},Kt={class:"grid gap-1.5"},Wt={class:"grid gap-1.5"},Yt={class:"grid gap-1.5"},Gt={class:"grid gap-1.5"},Qt={class:"mt-3 flex flex-wrap gap-2"},Xt={class:"overflow-hidden rounded-xl border border-sidebar-border/70 bg-white dark:border-sidebar-border dark:bg-neutral-900"},Zt={class:"overflow-x-auto"},es={class:"w-full text-left text-xs"},ts={class:"border-b border-sidebar-border/70 text-[11px] uppercase text-muted-foreground"},ss={key:0,class:"px-3 py-2"},as={key:1,class:"px-3 py-2"},os={key:2,class:"px-3 py-2 whitespace-nowrap"},rs={key:3,class:"px-3 py-2 whitespace-nowrap"},ns={key:4,class:"px-3 py-2 whitespace-nowrap"},ls={key:5,class:"px-3 py-2"},ds={key:6,class:"px-3 py-2"},is={key:7,class:"px-3 py-2 whitespace-nowrap"},us={key:8,class:"px-3 py-2"},ps={key:9,class:"px-3 py-2"},_s={key:10,class:"px-3 py-2"},cs={key:11,class:"px-3 py-2"},fs={key:0,class:"px-3 py-2 font-semibold"},ms={class:"group inline-flex items-center gap-1"},xs={class:"text-muted-foreground"},ys={key:1,class:"px-3 py-2 whitespace-nowrap"},vs={class:"group inline-flex items-center gap-1"},gs={class:"text-muted-foreground"},bs={key:2,class:"px-3 py-2"},hs={class:"group inline-flex items-center gap-1"},ks={key:3,class:"px-3 py-2 whitespace-nowrap"},ws={class:"group inline-flex items-center gap-1"},Cs={class:"max-w-45 truncate"},qs={class:"text-xs"},Vs={key:4,class:"px-3 py-2 whitespace-nowrap"},$s={class:"group inline-flex items-center gap-1"},Us={class:"max-w-45 truncate"},Bs={class:"text-xs"},Ns={key:5,class:"px-3 py-2"},Fs={class:"group flex max-w-55 items-start gap-1"},Ss={class:"truncate leading-5 max-w-32"},Rs={class:"text-xs"},Ms=["onClick"],Ts={key:1,class:"mt-0.5"},Ps=["onClick"],Is={class:"text-xs"},Ds={key:6,class:"px-3 py-2 font-medium"},Ls={class:"group flex flex-col"},Os={class:"inline-flex items-center gap-1"},Hs=["onClick"],Es={key:0,class:"text-[11px] text-muted-foreground"},js={key:7,class:"px-3 py-2"},zs={class:"group inline-flex items-center gap-1"},As=["onClick"],Js={key:8,class:"px-3 py-2 whitespace-nowrap"},Ks={class:"group inline-flex items-center gap-1"},Ws={class:"max-w-45 truncate"},Ys={class:"text-xs"},Gs={key:9,class:"px-3 py-2"},Qs={class:"group inline-flex items-center gap-1"},Xs={key:10,class:"px-3 py-2"},Zs={key:0,class:"flex items-center gap-2"},ea={key:0,class:"group inline-flex items-center gap-1"},ta={class:"max-w-32 truncate text-[11px] text-muted-foreground"},sa={class:"text-xs"},aa=["onClick"],oa={key:1,class:"text-muted-foreground"},ra={key:11,class:"px-3 py-2"},na={class:"group flex max-w-45 items-start gap-1"},la={class:"truncate leading-5 text-muted-foreground"},da={class:"text-xs"},ia={class:"px-3 py-2"},ua={class:"flex items-center justify-end gap-1"},pa={key:0},_a=["colspan"],ca={class:"flex flex-wrap items-center gap-3 border-t border-sidebar-border/70 px-4 py-3"},fa={class:"flex items-center gap-2 text-xs text-muted-foreground"},ma=["value"],xa=["innerHTML"],ya={class:"border-t border-sidebar-border/70 px-4 py-3 text-xs"},va={class:"flex flex-wrap items-center gap-2 text-muted-foreground"},ga={key:1},ba={key:0,class:"border-t border-sidebar-border/70 bg-muted/30 px-4 py-3"},ha={class:"flex flex-col gap-2 text-sm"},ka={class:"flex flex-wrap items-center gap-4 font-semibold"},wa={class:"mx-auto flex h-full w-full max-w-4xl flex-col"},Ca={key:0},qa={key:1},Va={class:"flex-1 overflow-y-auto px-6 pb-6"},$a={class:"grid gap-4 md:grid-cols-2"},Ua={class:"grid gap-2"},Ba=["value"],Na={key:0,class:"text-sm text-red-600"},Fa={class:"grid gap-2"},Sa=["disabled"],Ra=["value"],Ma={key:0,class:"text-sm text-red-600"},Ta={key:0,class:"grid gap-2"},Pa={key:0,class:"text-sm text-red-600"},Ia={class:"grid gap-2 md:col-span-1"},Da={key:0,class:"text-sm text-red-600"},La={class:"grid gap-2 md:col-span-1"},Oa={key:0,class:"text-sm text-red-600"},Ha={key:1,class:"text-xs text-muted-foreground"},Ea=["href"],ja={class:"grid gap-2"},za={key:0,class:"text-sm text-red-600"},Aa={key:1,class:"grid gap-2"},Ja={key:0,class:"text-sm text-red-600"},Ka={key:2,class:"grid gap-2 md:col-span-2"},Wa=["value"],Ya={key:0,class:"text-sm text-red-600"},Ga={class:"grid gap-2"},Qa={key:3,class:"grid gap-2"},Xa={class:"grid gap-2 md:col-span-2"},Za={class:"flex flex-wrap gap-2"},eo={key:0,class:"grid gap-2 md:col-span-2"},to={key:0,class:"text-sm text-red-600"},so={key:1,class:"grid gap-2 md:col-span-2"},ao={key:0,class:"text-sm text-red-600"},oo={key:1,class:"text-xs text-muted-foreground"},ro=["href"],no={class:"mx-auto flex h-full w-full max-w-3xl flex-col"},lo={class:"flex-1 overflow-y-auto px-6 pb-6"},io={key:0,class:"space-y-4"},uo={class:"flex items-center justify-between text-sm"},po={class:"font-medium"},_o={class:"text-xs text-muted-foreground"},co={class:"mt-1 text-xs uppercase text-muted-foreground"},fo={class:"mt-3 space-y-2 text-sm"},mo={class:"text-xs font-semibold uppercase text-muted-foreground"},xo={key:0,class:"space-y-1 text-xs"},yo={class:"flex items-start gap-2 break-all rounded-sm bg-muted/40 px-2 py-1"},vo=["onClick"],go={class:"flex items-start gap-2 break-all rounded-sm bg-muted/40 px-2 py-1"},bo=["onClick"],ho={key:1,class:"break-all rounded-sm bg-muted/40 px-2 py-1 text-xs"},ko={class:"flex items-start gap-2"},wo=["onClick"],Co={key:0,class:"text-sm text-muted-foreground"},Be="payment-requests.column-visibility",Lo=O({__name:"Index",setup(q){const k=at(),_=C(()=>k.props),g=n=>new Intl.NumberFormat("uk-UA",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),v=C(()=>_.value.auth.user.role),V=C(()=>v.value==="user"),P=C(()=>v.value!=="user"),I=C(()=>v.value!=="user"),H=C(()=>v.value!=="user"),X=C(()=>v.value!=="user"),ae=[{title:"Платіжні заявки",href:"/payment-requests"}],u=ge({author_id:_.value.filters.author_id??"",participant_id:_.value.filters.participant_id??"",expense_type_id:_.value.filters.expense_type_id??"",expense_category_id:_.value.filters.expense_category_id??"",paid_account_id:_.value.filters.paid_account_id??"",purchase_reference:_.value.filters.purchase_reference??"",ready_for_payment:_.value.filters.ready_for_payment??"",paid:_.value.filters.paid??"",created_from:_.value.filters.created_from??"",created_to:_.value.filters.created_to??"",per_page:_.value.filters.per_page??30}),E=C(()=>{const n=[],e=$=>_.value.users.find(A=>A.id===Number($))?.name??`#${$}`,s=$=>_.value.expenseTypes.find(A=>A.id===Number($))?.name??`#${$}`,x=$=>_.value.expenseCategories.find(A=>A.id===Number($))?.name??`#${$}`,ee=$=>_.value.paymentAccounts.find(A=>A.id===Number($))?.name??`#${$}`;return u.author_id&&n.push({label:"Автор",value:e(u.author_id)}),u.participant_id&&n.push({label:"Учасник",value:e(u.participant_id)}),u.expense_type_id&&n.push({label:"Тип витрат",value:s(u.expense_type_id)}),u.expense_category_id&&n.push({label:"Категорія",value:x(u.expense_category_id)}),u.paid_account_id&&n.push({label:"Рахунок",value:ee(u.paid_account_id)}),u.purchase_reference&&n.push({label:"№ закупки",value:u.purchase_reference}),u.ready_for_payment!==""&&n.push({label:"Готово до оплати",value:u.ready_for_payment==="1"?"Так":"Ні"}),u.paid!==""&&n.push({label:"Оплачено",value:u.paid==="1"?"Так":"Ні"}),u.created_from&&n.push({label:"Від",value:u.created_from}),u.created_to&&n.push({label:"До",value:u.created_to}),n}),D=N(!1),b=N(!1),M=N(!1),w=N(null),j=N("url"),Z=N(!1),m=ge({id:!0,created_at:!0,author:!0,expense_type:!0,expense_category:!0,requisites:!0,amount:!0,purchase_reference:!0,paid_account:!0,receipt_url:!0,participants:!0,status:!0}),Me=[{key:"id",label:"ID"},{key:"created_at",label:"Дата"},{key:"author",label:"Хто подав"},{key:"expense_type",label:"Тип витрат"},{key:"expense_category",label:"Категорія витрат"},{key:"requisites",label:"Реквізити"},{key:"amount",label:"Сума/Комісія"},{key:"purchase_reference",label:"№ Закупки"},{key:"paid_account",label:"Рахунок"},{key:"status",label:"Статус"},{key:"receipt_url",label:"Квитанція"},{key:"participants",label:"Учасники"}],Te=C(()=>Object.values(m).filter(Boolean).length+1),i=Ze({expense_type_id:"",expense_category_id:"",requisites:"",requisites_file:null,amount:"",commission:"",purchase_reference:"",paid_account_id:"",ready_for_payment:!1,paid:!1,receipt_url:"",receipt_file:null}),oe=()=>{i.reset(),i.clearErrors(),i.ready_for_payment=!1,i.paid=!1,i.receipt_url="",i.receipt_file=null,i.requisites_file=null,j.value="url",M.value=!1,w.value=null},Pe=n=>n.paid?"Оплачено":n.ready_for_payment?"Готово до оплати":"Чернетка",Ie=n=>n.paid?"default":n.ready_for_payment?"secondary":"outline",De={expense_type_id:"Тип витрат",expense_category_id:"Категорія витрат",requisites:"Реквізити для оплати",requisites_file_url:"Файл реквізитів",amount:"Сума",commission:"Комісія",purchase_reference:"Номер з таблиці по закупці",ready_for_payment:"Готово до оплати",paid:"Оплачено",paid_account_id:"Рахунок оплати",receipt_url:"Квитанція (посилання)"},fe=C(()=>i.expense_type_id?_.value.expenseCategories.filter(n=>Number(n.expense_type_id)===Number(i.expense_type_id)):_.value.expenseCategories),me=C(()=>u.expense_type_id?_.value.expenseCategories.filter(n=>Number(n.expense_type_id)===Number(u.expense_type_id)):_.value.expenseCategories),Le=C(()=>i.expense_type_id?_.value.expenseTypes.find(n=>n.id===Number(i.expense_type_id)):null),Oe=C(()=>Le.value?.name==="Оплата за товар"),le=n=>n==null||n===""?"—":typeof n=="boolean"?n?"Так":"Ні":String(n),de=n=>typeof n!="string"?!1:n.startsWith("http://")||n.startsWith("https://"),He=n=>n==="created"?"Створив заявку":n==="updated"?"Оновив заявку":n==="status_changed"?"Змінив статус":n==="requisites_file_pruned"?"Автоматично видалено файл реквізитів":n;Ne(()=>{try{const n=localStorage.getItem(Be);if(!n)return;const e=JSON.parse(n);for(const s of Object.keys(m))typeof e[s]=="boolean"&&(m[s]=e[s])}catch{}}),re(m,n=>{try{localStorage.setItem(Be,JSON.stringify(n))}catch{}},{deep:!0}),re(()=>i.expense_type_id,()=>{fe.value.some(n=>n.id===Number(i.expense_category_id))||(i.expense_category_id="")}),re(()=>u.expense_type_id,()=>{me.value.some(n=>n.id===Number(u.expense_category_id))||(u.expense_category_id="")});const xe=n=>{j.value=n,n==="url"&&(i.receipt_file=null)},ye=n=>n===!0||n==="true"||n===1||n==="1",Ee=()=>{oe(),D.value=!0},je=n=>{M.value=!0,w.value=n,i.clearErrors(),i.expense_type_id=n.expense_type?.id??"",i.expense_category_id=n.expense_category?.id??"",i.requisites=n.requisites??"",i.amount=n.amount??"",i.commission=n.commission??"",i.purchase_reference=n.purchase_reference??"",i.paid_account_id=n.paid_account_id??"",i.ready_for_payment=ye(n.ready_for_payment),i.paid=ye(n.paid),i.receipt_url=n.receipt_url??"",i.receipt_file=null,i.requisites_file=null,j.value="url",D.value=!0,console.log(n.ready_for_payment,typeof n.ready_for_payment)},ze=n=>{w.value=n,b.value=!0},ve=n=>({...n,ready_for_payment:n.ready_for_payment?1:0,paid:n.paid?1:0}),Ae=()=>{if(V.value&&(i.paid=!1,i.receipt_url="",i.receipt_file=null,i.commission=""),j.value==="file"&&i.receipt_file&&(i.receipt_url=""),M.value&&w.value){if(!window.confirm("Підтвердити оновлення заявки?"))return;i.transform(e=>({...ve(e),_method:"put"})).post(`/payment-requests/${w.value.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{D.value=!1,oe(),L.success("Заявку оновлено")},onError:()=>L.error("Не вдалося оновити заявку")});return}i.transform(n=>ve(n)).post("/payment-requests",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{D.value=!1,oe(),L.success("Заявку створено")},onError:()=>L.error("Не вдалося створити заявку")})},ie=()=>{st.get("/payment-requests",u,{preserveState:!0,replace:!0})},Je=n=>{const e=n.target;u.per_page=e.value,ie()},Ke=()=>{u.author_id="",u.participant_id="",u.expense_type_id="",u.expense_category_id="",u.paid_account_id="",u.purchase_reference="",u.ready_for_payment="",u.paid="",u.created_from="",u.created_to="",u.per_page=30,ie()},We=n=>{const e=n.target;i.receipt_file=e.files?.[0]??null},Ye=n=>{const e=n.target;i.requisites_file=e.files?.[0]??null},Ge=async n=>{try{await navigator.clipboard.writeText(n),L.success("Посилання скопійовано")}catch{L.error("Не вдалося скопіювати")}},z=async(n,e)=>{const s=n==null||n===""?"—":String(n);try{await navigator.clipboard.writeText(s),L.success(`${e} скопійовано`)}catch{L.error("Не вдалося скопіювати")}};return(n,e)=>(r(),l(h,null,[o(t(et),{title:"Платіжні заявки"}),o(rt,{breadcrumbs:ae},{default:d(()=>[a("div",Ut,[a("div",Bt,[a("div",Nt,[e[32]||(e[32]=a("div",null,[a("h1",{class:"text-xl font-semibold"},"Платіжні заявки"),a("p",{class:"text-sm text-muted-foreground"}," Облік заявок, зміни статусів та історія учасників. ")],-1)),a("div",Ft,[o(t(Ue),{open:Z.value,"onUpdate:open":e[0]||(e[0]=s=>Z.value=s)},{default:d(()=>[o(t($t),{"as-child":""},{default:d(()=>[o(t(B),{variant:"outline",size:"sm",type:"button",class:"h-8 gap-1.5 px-3 text-xs"},{default:d(()=>[o(t(kt),{class:"h-4 w-4"}),e[30]||(e[30]=f(" Фільтри ",-1)),o(t(ft),{class:te(["h-4 w-4 transition-transform",Z.value?"rotate-180":""])},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["open"]),_.value.permissions.create?(r(),T(t(B),{key:0,size:"sm",class:"h-8 px-3 text-xs",onClick:Ee},{default:d(()=>[...e[31]||(e[31]=[f(" Створити заявку ",-1)])]),_:1})):p("",!0)])]),o(t(Ue),{open:Z.value,"onUpdate:open":e[11]||(e[11]=s=>Z.value=s),class:"mt-4"},{default:d(()=>[o(t(Vt),null,{default:d(()=>[a("div",St,[o(t(y),{class:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[33]||(e[33]=[f("Видимість колонок",-1)])]),_:1}),a("div",Rt,[(r(),l(h,null,U(Me,s=>a("button",{key:s.key,type:"button",class:te(["rounded-md border px-2 py-1 text-[11px] leading-none transition-colors",m[s.key]?"border-primary text-primary":"border-input text-muted-foreground"]),onClick:x=>m[s.key]=!m[s.key]},c(m[s.key]?"✓":"○")+" "+c(s.label),11,Mt)),64))])]),a("div",Tt,[a("div",Pt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[34]||(e[34]=[f("Хто подав",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.author_id=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[e[35]||(e[35]=a("option",{value:""},"Усі",-1)),(r(!0),l(h,null,U(_.value.users,s=>(r(),l("option",{key:s.id,value:String(s.id)},c(s.name),9,It))),128))],512),[[S,u.author_id]])]),a("div",Dt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[36]||(e[36]=[f("Учасник",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.participant_id=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[e[37]||(e[37]=a("option",{value:""},"Усі",-1)),(r(!0),l(h,null,U(_.value.users,s=>(r(),l("option",{key:s.id,value:String(s.id)},c(s.name),9,Lt))),128))],512),[[S,u.participant_id]])]),a("div",Ot,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[38]||(e[38]=[f("Тип витрат",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.expense_type_id=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[e[39]||(e[39]=a("option",{value:""},"Усі",-1)),(r(!0),l(h,null,U(_.value.expenseTypes,s=>(r(),l("option",{key:s.id,value:String(s.id)},c(s.name),9,Ht))),128))],512),[[S,u.expense_type_id]])]),a("div",Et,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[40]||(e[40]=[f("Категорія",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>u.expense_category_id=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[e[41]||(e[41]=a("option",{value:""},"Усі",-1)),(r(!0),l(h,null,U(me.value,s=>(r(),l("option",{key:s.id,value:String(s.id)},c(s.name),9,jt))),128))],512),[[S,u.expense_category_id]])]),a("div",zt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[42]||(e[42]=[f("Рахунок",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>u.paid_account_id=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[e[43]||(e[43]=a("option",{value:""},"Усі",-1)),(r(!0),l(h,null,U(_.value.paymentAccounts,s=>(r(),l("option",{key:s.id,value:String(s.id)},c(s.name),9,At))),128))],512),[[S,u.paid_account_id]])]),a("div",Jt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[44]||(e[44]=[f("№ Закупки",-1)])]),_:1}),o(t(R),{modelValue:u.purchase_reference,"onUpdate:modelValue":e[6]||(e[6]=s=>u.purchase_reference=s),type:"text",class:"h-8 w-full min-w-0 px-2.5 text-[12px]"},null,8,["modelValue"])]),a("div",Kt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[45]||(e[45]=[f("Готово",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>u.ready_for_payment=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[...e[46]||(e[46]=[a("option",{value:""},"Усі",-1),a("option",{value:"1"},"Так",-1),a("option",{value:"0"},"Ні",-1)])],512),[[S,u.ready_for_payment]])]),a("div",Wt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[47]||(e[47]=[f("Оплачено",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>u.paid=s),class:"h-8 w-full min-w-0 rounded-md border border-input bg-transparent px-2.5 text-[12px]"},[...e[48]||(e[48]=[a("option",{value:""},"Усі",-1),a("option",{value:"1"},"Так",-1),a("option",{value:"0"},"Ні",-1)])],512),[[S,u.paid]])]),a("div",Yt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[49]||(e[49]=[f("Дата від",-1)])]),_:1}),o(t(R),{modelValue:u.created_from,"onUpdate:modelValue":e[9]||(e[9]=s=>u.created_from=s),type:"date",class:"h-8 w-full min-w-0 px-2.5 text-[12px]"},null,8,["modelValue"])]),a("div",Gt,[o(t(y),{class:"text-[11px] font-medium uppercase tracking-wide text-muted-foreground"},{default:d(()=>[...e[50]||(e[50]=[f("Дата до",-1)])]),_:1}),o(t(R),{modelValue:u.created_to,"onUpdate:modelValue":e[10]||(e[10]=s=>u.created_to=s),type:"date",class:"h-8 w-full min-w-0 px-2.5 text-[12px]"},null,8,["modelValue"])])]),a("div",Qt,[o(t(B),{variant:"secondary",size:"sm",class:"h-8 px-3 text-xs",onClick:ie},{default:d(()=>[...e[51]||(e[51]=[f("Застосувати",-1)])]),_:1}),o(t(B),{variant:"ghost",size:"sm",class:"h-8 px-3 text-xs",onClick:Ke},{default:d(()=>[...e[52]||(e[52]=[f("Очистити",-1)])]),_:1})])]),_:1})]),_:1},8,["open"])]),a("div",Xt,[a("div",Zt,[a("table",es,[a("thead",ts,[a("tr",null,[m.id?(r(),l("th",ss,"ID")):p("",!0),m.created_at?(r(),l("th",as,"Дата")):p("",!0),m.author?(r(),l("th",os,"Хто подав")):p("",!0),m.expense_type?(r(),l("th",rs,"Тип витрат")):p("",!0),m.expense_category?(r(),l("th",ns,"Категорія витрат")):p("",!0),m.requisites?(r(),l("th",ls,"Реквізити")):p("",!0),m.amount?(r(),l("th",ds,"Сума / Комісія")):p("",!0),m.purchase_reference?(r(),l("th",is,"№ Закупки")):p("",!0),m.paid_account?(r(),l("th",us,"Рахунок")):p("",!0),m.status?(r(),l("th",ps,"Статус")):p("",!0),m.receipt_url?(r(),l("th",_s,"Квитанція")):p("",!0),m.participants?(r(),l("th",cs,"Учасники")):p("",!0),e[53]||(e[53]=a("th",{class:"px-3 py-2 text-right"},"Дії",-1))])]),a("tbody",null,[(r(!0),l(h,null,U(_.value.paymentRequests.data,s=>(r(),l("tr",{key:s.id,class:"border-b border-sidebar-border/40 align-top"},[m.id?(r(),l("td",fs,[a("div",ms,[a("span",xs,c(s.id),1)])])):p("",!0),m.created_at?(r(),l("td",ys,[a("div",vs,[a("span",gs,c(new Date(s.created_at).toLocaleString().slice(0,-3)),1)])])):p("",!0),m.author?(r(),l("td",bs,[a("div",hs,[a("span",null,c(s.author?.name??"—"),1)])])):p("",!0),m.expense_type?(r(),l("td",ks,[a("div",ws,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",Cs,c(s.expense_type?.name??"—"),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",qs,c(s.expense_type?.name??"—"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])):p("",!0),m.expense_category?(r(),l("td",Vs,[a("div",$s,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",Us,c(s.expense_category?.name??"—"),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",Bs,c(s.expense_category?.name??"—"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])):p("",!0),m.requisites?(r(),l("td",Ns,[a("div",Fs,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",Ss,c(s.requisites??"—"),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",Rs,c(s.requisites??"—"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),s.requisites?(r(),l("button",{key:0,type:"button",class:"mt-0.5",onClick:x=>z(s.requisites,"Реквізити"),"aria-label":"Скопіювати реквізити"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,Ms)):p("",!0),s.requisites_file_url?(r(),l("div",Ts,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("button",{type:"button",class:"",onClick:x=>z(s.requisites_file_url,"Файл реквізитів"),"aria-label":"Скопіювати файл реквізитів"},[o(t(Ct),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,Ps)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",Is,c(s.requisites_file_url),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])):p("",!0)])])):p("",!0),m.amount?(r(),l("td",Ds,[a("div",Ls,[a("div",Os,[a("span",null,c(s.amount),1),a("button",{type:"button",class:"",onClick:x=>z(s.amount,"Суму"),"aria-label":"Скопіювати суму"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,Hs)]),s.commission?(r(),l("span",Es," Комісія: "+c(s.commission),1)):p("",!0)])])):p("",!0),m.purchase_reference?(r(),l("td",js,[a("div",zs,[a("span",null,c(s.purchase_reference??"—"),1),s.purchase_reference?(r(),l("button",{key:0,type:"button",class:"",onClick:x=>z(s.purchase_reference,"Номер закупки"),"aria-label":"Скопіювати номер закупки"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,As)):p("",!0)])])):p("",!0),m.paid_account?(r(),l("td",Js,[a("div",Ks,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",Ws,c(s.paid_account?.name??"—"),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",Ys,c(s.paid_account?.name??"—"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])):p("",!0),m.status?(r(),l("td",Gs,[a("div",Qs,[o(t(nt),{variant:Ie(s)},{default:d(()=>[f(c(Pe(s)),1)]),_:2},1032,["variant"])])])):p("",!0),m.receipt_url?(r(),l("td",Xs,[s.receipt_url?(r(),l("div",Zs,[o(t(lt),{class:"h-4 w-4 text-green-600"}),V.value?p("",!0):(r(),l("div",ea,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",ta,c(s.receipt_url),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",sa,c(s.receipt_url),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a("button",{type:"button",class:"",onClick:x=>Ge(s.receipt_url),"aria-label":"Скопіювати посилання"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,aa)]))])):(r(),l("span",oa,"—"))])):p("",!0),m.participants?(r(),l("td",ra,[a("div",na,[o(t(G),{"delay-duration":100},{default:d(()=>[o(t(J),null,{default:d(()=>[o(t(K),{"as-child":""},{default:d(()=>[a("span",la,c(s.participants.map(x=>x.name).join(", ")||"—"),1)]),_:2},1024),o(t(W),null,{default:d(()=>[a("span",da,c(s.participants.map(x=>x.name).join(", ")||"—"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])):p("",!0),a("td",ia,[a("div",ua,[o(t(B),{size:"icon-sm",variant:"outline",onClick:x=>je(s),disabled:!s.can.update,"aria-label":"Редагувати"},{default:d(()=>[o(t(qt),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),o(t(B),{size:"icon-sm",variant:"secondary",onClick:x=>ze(s),"aria-label":"Історія"},{default:d(()=>[o(t(wt),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128)),_.value.paymentRequests.data.length===0?(r(),l("tr",pa,[a("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:Te.value},"Заявок не знайдено.",8,_a)])):p("",!0)])])]),a("div",ca,[a("div",fa,[e[55]||(e[55]=a("span",null,"На сторінці:",-1)),a("select",{value:String(u.per_page),class:"h-8 rounded-md border border-input bg-transparent px-2 text-xs text-foreground",onChange:Je},[...e[54]||(e[54]=[a("option",{value:"10"},"10",-1),a("option",{value:"20"},"20",-1),a("option",{value:"30"},"30",-1),a("option",{value:"50"},"50",-1),a("option",{value:"100"},"100",-1)])],40,ma)]),(r(!0),l(h,null,U(_.value.paymentRequests.links,s=>(r(),l(h,{key:s.label},[s.url?(r(),T(t(tt),{key:0,href:s.url,class:te(["rounded-md border border-input px-3 py-1 text-sm",s.active?"bg-muted font-semibold":"text-muted-foreground"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(r(),l("span",{key:1,class:"rounded-md border border-input px-3 py-1 text-sm text-muted-foreground opacity-60",innerHTML:s.label},null,8,xa))],64))),128))]),a("div",ya,[a("div",va,[e[56]||(e[56]=a("span",{class:"font-medium text-foreground"},"Активні фільтри:",-1)),E.value.length?(r(!0),l(h,{key:0},U(E.value,s=>(r(),l("span",{key:`${s.label}-${s.value}`,class:"rounded-md border border-input/60 bg-background px-2 py-1 text-foreground"},c(s.label)+": "+c(s.value),1))),128)):(r(),l("span",ga,"немає"))])]),_.value.totals?(r(),l("div",ba,[a("div",ha,[e[57]||(e[57]=a("span",{class:"text-xs text-muted-foreground"}," Підсумок по всіх заявках, що відповідають фільтрам за заданий період: ",-1)),a("div",ka,[a("span",null,"Сума: "+c(g(_.value.totals.amount)),1),a("span",null,"Комісія: "+c(g(_.value.totals.commission)),1)])])])):p("",!0)])]),o(t(he),{open:D.value,"onUpdate:open":e[28]||(e[28]=s=>{D.value=s,s||oe()})},{default:d(()=>[o(t(ke),{class:"h-[90vh]"},{default:d(()=>[a("div",wa,[a("form",{class:"flex h-full flex-col",onSubmit:pe(Ae,["prevent"])},[o(t(we),{class:"px-6 pt-6"},{default:d(()=>[o(t(Ce),null,{default:d(()=>[M.value?(r(),l("span",Ca,"Редагувати заявку")):(r(),l("span",qa,"Створити заявку"))]),_:1}),o(t(qe),null,{default:d(()=>[...e[58]||(e[58]=[f(" Заповніть обов'язкові поля та підтвердіть дію. ",-1)])]),_:1})]),_:1}),a("div",Va,[a("div",$a,[a("div",Ua,[o(t(y),null,{default:d(()=>[...e[59]||(e[59]=[f("Тип витрат",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>t(i).expense_type_id=s),class:"h-9 rounded-md border border-input bg-transparent px-3 text-sm"},[e[60]||(e[60]=a("option",{value:""},"Оберіть тип",-1)),(r(!0),l(h,null,U(_.value.expenseTypes,s=>(r(),l("option",{key:s.id,value:s.id},c(s.name),9,Ba))),128))],512),[[S,t(i).expense_type_id]]),t(i).errors.expense_type_id?(r(),l("span",Na,c(t(i).errors.expense_type_id),1)):p("",!0)]),a("div",Fa,[o(t(y),null,{default:d(()=>[...e[61]||(e[61]=[f("Категорія витрат",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>t(i).expense_category_id=s),class:"h-9 rounded-md border border-input bg-transparent px-3 text-sm",disabled:!t(i).expense_type_id},[e[62]||(e[62]=a("option",{value:""},"Оберіть категорію",-1)),(r(!0),l(h,null,U(fe.value,s=>(r(),l("option",{key:s.id,value:s.id},c(s.name),9,Ra))),128))],8,Sa),[[S,t(i).expense_category_id]]),t(i).errors.expense_category_id?(r(),l("span",Ma,c(t(i).errors.expense_category_id),1)):p("",!0)]),Oe.value?(r(),l("div",Ta,[o(t(y),null,{default:d(()=>[...e[63]||(e[63]=[f("Номер з таблиці по закупці",-1)])]),_:1}),o(t(R),{modelValue:t(i).purchase_reference,"onUpdate:modelValue":e[14]||(e[14]=s=>t(i).purchase_reference=s),type:"text"},null,8,["modelValue"]),t(i).errors.purchase_reference?(r(),l("span",Pa,c(t(i).errors.purchase_reference),1)):p("",!0)])):p("",!0),a("div",Ia,[o(t(y),null,{default:d(()=>[...e[64]||(e[64]=[f("Реквізити для оплати",-1)])]),_:1}),o(t(R),{modelValue:t(i).requisites,"onUpdate:modelValue":e[15]||(e[15]=s=>t(i).requisites=s),type:"text"},null,8,["modelValue"]),t(i).errors.requisites?(r(),l("span",Da,c(t(i).errors.requisites),1)):p("",!0)]),a("div",La,[o(t(y),null,{default:d(()=>[...e[65]||(e[65]=[f("Файл реквізитів",-1)])]),_:1}),o(t(R),{type:"file",accept:".xls,.xlsx,.csv,.pdf,.p7m,.jpg,.jpeg,.png,.webp",onChange:Ye}),t(i).errors.requisites_file?(r(),l("span",Oa,c(t(i).errors.requisites_file),1)):p("",!0),w.value?.requisites_file_url?(r(),l("p",Ha,[e[66]||(e[66]=f(" Поточний файл: ",-1)),a("a",{href:w.value.requisites_file_url,class:"underline",target:"_blank",rel:"noreferrer"},"переглянути",8,Ea)])):p("",!0)]),a("div",ja,[o(t(y),null,{default:d(()=>[...e[67]||(e[67]=[f("Сума",-1)])]),_:1}),o(t(R),{modelValue:t(i).amount,"onUpdate:modelValue":e[16]||(e[16]=s=>t(i).amount=s),type:"number",step:"0.01"},null,8,["modelValue"]),t(i).errors.amount?(r(),l("span",za,c(t(i).errors.amount),1)):p("",!0)]),H.value?(r(),l("div",Aa,[o(t(y),null,{default:d(()=>[...e[68]||(e[68]=[f("Комісія",-1)])]),_:1}),o(t(R),{modelValue:t(i).commission,"onUpdate:modelValue":e[17]||(e[17]=s=>t(i).commission=s),type:"number",step:"0.01"},null,8,["modelValue"]),t(i).errors.commission?(r(),l("span",Ja,c(t(i).errors.commission),1)):p("",!0)])):p("",!0),X.value?(r(),l("div",Ka,[o(t(y),null,{default:d(()=>[...e[69]||(e[69]=[f("Рахунок, з якого була здійснена оплата",-1)])]),_:1}),F(a("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>t(i).paid_account_id=s),class:"h-9 rounded-md border border-input bg-transparent px-3 text-sm"},[e[70]||(e[70]=a("option",{value:""},"Оберіть рахунок",-1)),(r(!0),l(h,null,U(_.value.paymentAccounts,s=>(r(),l("option",{key:s.id,value:s.id},c(s.name),9,Wa))),128))],512),[[S,t(i).paid_account_id]]),t(i).errors.paid_account_id?(r(),l("span",Ya,c(t(i).errors.paid_account_id),1)):p("",!0)])):p("",!0),a("div",Ga,[o(t(y),null,{default:d(()=>[...e[71]||(e[71]=[f("Готово до оплати",-1)])]),_:1}),a("div",{class:"flex cursor-pointer items-center gap-3 rounded-md border border-input px-3 py-2",onClick:e[21]||(e[21]=s=>t(i).ready_for_payment=!t(i).ready_for_payment)},[o(t(be),{modelValue:t(i).ready_for_payment,"onUpdate:modelValue":e[19]||(e[19]=s=>t(i).ready_for_payment=s),class:"h-5 w-5",onClick:e[20]||(e[20]=pe(()=>{},["stop"]))},null,8,["modelValue"]),e[72]||(e[72]=a("span",{class:"text-sm font-medium"},"Готово",-1))])]),P.value?(r(),l("div",Qa,[o(t(y),null,{default:d(()=>[...e[73]||(e[73]=[f("Оплачено",-1)])]),_:1}),a("div",{class:"flex cursor-pointer items-center gap-3 rounded-md border border-input px-3 py-2",onClick:e[24]||(e[24]=s=>t(i).paid=!t(i).paid)},[o(t(be),{modelValue:t(i).paid,"onUpdate:modelValue":e[22]||(e[22]=s=>t(i).paid=s),class:"h-5 w-5",onClick:e[23]||(e[23]=pe(()=>{},["stop"]))},null,8,["modelValue"]),e[74]||(e[74]=a("span",{class:"text-sm font-medium"},"Оплачено",-1))])])):p("",!0),I.value?(r(),l(h,{key:4},[a("div",Xa,[o(t(y),null,{default:d(()=>[...e[75]||(e[75]=[f("Спосіб завантаження квитанції",-1)])]),_:1}),a("div",Za,[o(t(B),{type:"button",variant:"outline",class:te(j.value==="url"?"border-primary text-primary":""),onClick:e[25]||(e[25]=s=>xe("url"))},{default:d(()=>[...e[76]||(e[76]=[f(" Посилання ",-1)])]),_:1},8,["class"]),o(t(B),{type:"button",variant:"outline",class:te(j.value==="file"?"border-primary text-primary":""),onClick:e[26]||(e[26]=s=>xe("file"))},{default:d(()=>[...e[77]||(e[77]=[f(" Файл PDF ",-1)])]),_:1},8,["class"])])]),j.value==="url"?(r(),l("div",eo,[o(t(y),null,{default:d(()=>[...e[78]||(e[78]=[f("Посилання на квитанцію або підтвердження оплати",-1)])]),_:1}),o(t(R),{modelValue:t(i).receipt_url,"onUpdate:modelValue":e[27]||(e[27]=s=>t(i).receipt_url=s),type:"text"},null,8,["modelValue"]),t(i).errors.receipt_url?(r(),l("span",to,c(t(i).errors.receipt_url),1)):p("",!0)])):(r(),l("div",so,[o(t(y),null,{default:d(()=>[...e[79]||(e[79]=[f("Файл квитанції (PDF)",-1)])]),_:1}),o(t(R),{type:"file",accept:".pdf,.p7m",onChange:We}),t(i).errors.receipt_file?(r(),l("span",ao,c(t(i).errors.receipt_file),1)):p("",!0),w.value?.receipt_url?(r(),l("p",oo,[e[80]||(e[80]=f(" Поточний файл/посилання: ",-1)),a("a",{href:w.value.receipt_url,class:"underline",target:"_blank",rel:"noreferrer"},"переглянути",8,ro)])):p("",!0)]))],64)):p("",!0)])]),o(t(Ve),{class:"px-6 pb-6"},{default:d(()=>[o(t(B),{type:"submit",disabled:t(i).processing},{default:d(()=>[f(c(M.value?"Зберегти":"Створити"),1)]),_:1},8,["disabled"]),o(t($e),{"as-child":""},{default:d(()=>[o(t(B),{type:"button",variant:"outline"},{default:d(()=>[...e[81]||(e[81]=[f("Скасувати",-1)])]),_:1})]),_:1})]),_:1})],32)])]),_:1})]),_:1},8,["open"]),o(t(he),{open:b.value,"onUpdate:open":e[29]||(e[29]=s=>b.value=s)},{default:d(()=>[o(t(ke),{class:"h-[80vh]"},{default:d(()=>[a("div",no,[o(t(we),{class:"px-6 pt-6"},{default:d(()=>[o(t(Ce),null,{default:d(()=>[...e[82]||(e[82]=[f("Історія заявки",-1)])]),_:1}),o(t(qe),null,{default:d(()=>[...e[83]||(e[83]=[f(" Хто, що і коли змінював. ",-1)])]),_:1})]),_:1}),a("div",lo,[w.value?(r(),l("div",io,[(r(!0),l(h,null,U(w.value.history,s=>(r(),l("div",{key:s.id,class:"rounded-lg border border-sidebar-border/60 p-4"},[a("div",uo,[a("span",po,c(s.user?.name),1),a("span",_o,c(new Date(s.created_at).toLocaleString()),1)]),a("div",co,c(He(s.action)),1),a("div",fo,[(r(!0),l(h,null,U(s.changed_fields,(x,ee)=>(r(),l("div",{key:ee,class:"grid gap-1"},[a("div",mo,c(De[String(ee)]??String(ee)),1),typeof x=="object"&&x!==null&&"old"in x&&"new"in x?(r(),l("div",xo,[e[84]||(e[84]=a("span",{class:"text-muted-foreground"},"Було:",-1)),a("div",yo,[a("span",null,c(le(x.old)),1),de(x.old)?(r(),l("button",{key:0,type:"button",class:"ml-auto",onClick:$=>z(x.old,"URL"),"aria-label":"Скопіювати URL"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,vo)):p("",!0)]),e[85]||(e[85]=a("span",{class:"mx-2 text-muted-foreground"},"→",-1)),e[86]||(e[86]=a("span",{class:"text-muted-foreground"},"Стало:",-1)),a("div",go,[a("span",null,c(le(x.new)),1),de(x.new)?(r(),l("button",{key:0,type:"button",class:"ml-auto",onClick:$=>z(x.new,"URL"),"aria-label":"Скопіювати URL"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,bo)):p("",!0)])])):(r(),l("div",ho,[a("div",ko,[a("span",null,c(le(x)),1),de(x)?(r(),l("button",{key:0,type:"button",class:"ml-auto",onClick:$=>z(x,"URL"),"aria-label":"Скопіювати URL"},[o(t(Y),{class:"h-3.5 w-3.5 text-muted-foreground hover:text-foreground"})],8,wo)):p("",!0)])]))]))),128))])]))),128)),w.value.history.length===0?(r(),l("p",Co,"Історія відсутня.")):p("",!0)])):p("",!0)]),o(t(Ve),{class:"px-6 pb-6"},{default:d(()=>[o(t($e),{"as-child":""},{default:d(()=>[o(t(B),{type:"button",variant:"outline"},{default:d(()=>[...e[87]||(e[87]=[f("Закрити",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Lo as default};
