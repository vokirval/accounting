import{d as E,H as N,c as u,a as r,u as s,h as j,w as a,b as t,f as d,o as m,F as b,E as B,p as _,g,v as F,j as h,r as v,I as z,J as I}from"./app-DrHXUj_w.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-D_TnovZe.js";import{_ as p}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CHERCCRP.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-BEkDPcb8.js";import{_ as H}from"./Label.vue_vue_type_script_setup_true_lang-q2sD0DhG.js";import{_ as J,a as L,b as M,c as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5I83UkO.js";import"./index-3nVzOy6E.js";import"./VisuallyHidden-DiFExzsD.js";import"./useForwardExpose-l8w9yqD-.js";import"./useForwardPropsEmits-DR5ASvf6.js";import"./index-B26eXW15.js";import"./loader-circle-CXQ59b0Y.js";const P={class:"flex flex-col gap-6 p-4"},T={class:"flex flex-wrap items-center justify-between gap-4"},q={class:"overflow-hidden rounded-xl border border-sidebar-border/70 bg-white dark:border-sidebar-border dark:bg-neutral-900"},A={class:"w-full text-left text-sm"},G={class:"px-4 py-3"},K={class:"px-4 py-3"},Q={class:"flex gap-2"},R={key:0},W={class:"grid gap-2"},X={key:0,class:"text-sm text-red-600"},Y={class:"flex justify-end gap-2"},pe=E({__name:"Index",setup(Z){const y=I(),x=h(()=>y.props),k=[{title:"Адмін",href:"/admin/users"},{title:"Категорії витрат",href:"/admin/expense-categories"}],l=v(!1),f=v(!1),c=v(null),o=N({name:""}),$=()=>{f.value=!1,c.value=null,o.reset(),o.clearErrors(),l.value=!0},w=i=>{f.value=!0,c.value=i,o.name=i.name,o.clearErrors(),l.value=!0},C=()=>{if(f.value&&c.value){if(!window.confirm("Підтвердити оновлення категорії витрат?"))return;o.put(`/admin/expense-categories/${c.value.id}`,{preserveScroll:!0,onSuccess:()=>{l.value=!1}});return}o.post("/admin/expense-categories",{preserveScroll:!0,onSuccess:()=>{l.value=!1,o.reset()}})},S=i=>{window.confirm("Видалити категорію витрат?")&&z.delete(`/admin/expense-categories/${i.id}`,{preserveScroll:!0})};return(i,e)=>(m(),u(b,null,[r(s(j),{title:"Категорії витрат"}),r(U,{breadcrumbs:k},{default:a(()=>[t("div",P,[t("div",T,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-xl font-semibold"},"Категорії витрат"),t("p",{class:"text-sm text-muted-foreground"},"Налаштування лише для адміністратора.")],-1)),r(s(p),{onClick:$},{default:a(()=>[...e[3]||(e[3]=[d("Створити категорію",-1)])]),_:1})]),t("div",q,[t("table",A,[e[8]||(e[8]=t("thead",{class:"border-b border-sidebar-border/70 text-xs uppercase text-muted-foreground"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Назва"),t("th",{class:"px-4 py-3"},"Дії")])],-1)),t("tbody",null,[(m(!0),u(b,null,B(x.value.items,n=>(m(),u("tr",{key:n.id,class:"border-b border-sidebar-border/40"},[t("td",G,_(n.name),1),t("td",K,[t("div",Q,[r(s(p),{size:"sm",variant:"outline",onClick:V=>w(n)},{default:a(()=>[...e[5]||(e[5]=[d("Редагувати",-1)])]),_:1},8,["onClick"]),r(s(p),{size:"sm",variant:"destructive",onClick:V=>S(n)},{default:a(()=>[...e[6]||(e[6]=[d("Видалити",-1)])]),_:1},8,["onClick"])])])]))),128)),x.value.items.length===0?(m(),u("tr",R,[...e[7]||(e[7]=[t("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"2"},"Категорії витрат відсутні.",-1)])])):g("",!0)])])])]),r(s(J),{open:l.value,"onUpdate:open":e[2]||(e[2]=n=>l.value=n)},{default:a(()=>[r(s(L),null,{default:a(()=>[r(s(M),null,{default:a(()=>[r(s(O),null,{default:a(()=>[d(_(f.value?"Редагувати категорію":"Створити категорію"),1)]),_:1})]),_:1}),t("form",{class:"mt-4 grid gap-4",onSubmit:F(C,["prevent"])},[t("div",W,[r(s(H),null,{default:a(()=>[...e[9]||(e[9]=[d("Назва",-1)])]),_:1}),r(s(D),{modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(o).name=n)},null,8,["modelValue"]),s(o).errors.name?(m(),u("span",X,_(s(o).errors.name),1)):g("",!0)]),t("div",Y,[r(s(p),{type:"button",variant:"ghost",onClick:e[1]||(e[1]=n=>l.value=!1)},{default:a(()=>[...e[10]||(e[10]=[d("Скасувати",-1)])]),_:1}),r(s(p),{type:"submit",disabled:s(o).processing},{default:a(()=>[...e[11]||(e[11]=[d("Зберегти",-1)])]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{pe as default};
