import{d as z,D as Te,E as pe,G as me,H as fe,I as Be,J as Ee,c as q,e as G,u,g as ve,b as g,x as ne,A as L,B as Ae,K as Me,F as ge,L as ie,m as D,M as H,N as Re,O as $e,n as j,o as S,w as $,y as Fe,z as Ve,f as ee,t as te,a as P,h as De,C as ue,r as Ie}from"./app-lDkWGrQU.js";import{_ as ce}from"./InputError.vue_vue_type_script_setup_true_lang-CB1cywr2.js";import{c as oe,_ as de}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BYFK0Jf5.js";import{_ as We}from"./Input.vue_vue_type_script_setup_true_lang-DcN0OCTh.js";import{a as ae,u as Oe}from"./useForwardPropsEmits-CcOm-v4J.js";import{u as He,d as je,a as Le,b as V,r as J}from"./index-Ta6cFJNQ.js";import{_ as ze}from"./AuthLayout.vue_vue_type_script_setup_true_lang-BaNJtohH.js";import{q as Ne}from"./index-B26eXW15.js";const Ge=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,qe=z({props:{fallback:{type:String,required:!0}},setup(n){return()=>$e("noscript",{innerHTML:`<style>${n.fallback}</style>`})}}),he=Symbol("vue-otp-context");function Ke(n){return[setTimeout(n,0),setTimeout(n,10),setTimeout(n,50)]}const Ue=18,ye=40,Xe=`${ye}px`,Je=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ye({containerRef:n,inputRef:m,pushPasswordManagerStrategy:c,isFocused:o}){const i=j({done:!1,refocused:!1}),a=j(!1),r=j(!1),p=j(!1),h=D(()=>c==="none"?!1:(c==="increase-width"||c==="experimental-no-flickering")&&a.value&&r.value),v=()=>{const l=n.value,_=m.value;if(!l||!_||p.value||c==="none")return;const T=l,B=T.getBoundingClientRect().left+T.offsetWidth,k=T.getBoundingClientRect().top+T.offsetHeight/2,E=B-Ue,N=k;if(!(document.querySelectorAll(Je).length===0&&document.elementFromPoint(E,N)===l)&&(a.value=!0,p.value=!0,!i.value.refocused&&document.activeElement===_)){const I=[_.selectionStart,_.selectionEnd];_.blur(),_.focus(),_.setSelectionRange(I[0],I[1]),i.value.refocused=!0}},f=()=>{const l=n.value;!l||c==="none"||(r.value=window.innerWidth-l.getBoundingClientRect().right>=ye)};let b;return pe(()=>{f(),b=setInterval(f,1e3)}),me(()=>{clearInterval(b)}),fe([o,m],(l,_,T)=>{const[B,k]=l,E=B||document.activeElement===k;if(c==="none"||!E)return;const N=setTimeout(v,0),I=setTimeout(v,2e3),Y=setTimeout(v,5e3),Q=setTimeout(()=>{p.value=!0},6e3);T(()=>{clearTimeout(N),clearTimeout(I),clearTimeout(Y),clearTimeout(Q)})}),{hasPWMBadge:a,willPushPWMBadge:h,PWM_BADGE_SPACE_WIDTH:Xe}}const Qe={style:{position:"absolute",inset:"0","pointer-events":"none"}},Ze=["value","data-input-otp-placeholder-shown","data-input-otp-mss","data-input-otp-mse","aria-placeholder","pattern"],et=z({name:"OTPInput",inheritAttrs:!1,__name:"OTPInput",props:ie({maxlength:{},textAlign:{default:"left"},inputmode:{default:"numeric"},containerClass:{},pushPasswordManagerStrategy:{default:"increase-width"},noScriptCssFallback:{default:Ge},defaultValue:{default:""},pasteTransformer:{},accept:{},alt:{},autocomplete:{default:"one-time-code"},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{}},{modelValue:{default(n){return n.defaultValue}},modelModifiers:{}}),emits:ie(["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],["update:modelValue"]),setup(n,{expose:m,emit:c}){const o=n,i=c,[a]=Te(n,"modelValue"),r=He(a),p=D(()=>o.pattern?typeof o.pattern=="string"?new RegExp(o.pattern):o.pattern:null),h=H(!1),v=H(!1),f=H(null),b=H(null),l=H(null),_=H(null),T=je?.CSS?.supports?.("-webkit-touch-callout","none");let B={prev:[l.value?.selectionStart,l.value?.selectionEnd,l.value?.selectionDirection]};function k(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}pe(()=>{const t=l.value,e=_.value;if(!t||!e)return;B.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection??"none"];const s=Le(V,"selectionchange",x,{capture:!0});function x(){if(!t)return;if(V?.activeElement!==t){f.value=null,b.value=null;return}const d=t.selectionStart,C=t.selectionEnd,K=t.selectionDirection,U=t.maxLength,X=t.value,W=B.prev;let M=-1,R=-1,O;if(X.length!==0&&d!==null&&C!==null){const ke=d===C,Ce=d===X.length&&X.length<U;if(ke&&!Ce){const F=d;if(F===0)M=0,R=1,O="forward";else if(F===U)M=F-1,R=F,O="backward";else if(U>1&&X.length>1){let Z=0;if(W[0]!==null&&W[1]!==null){O=F<W[1]?"backward":"forward";const Pe=W[0]===W[1]&&W[0]<U;O==="backward"&&!Pe&&(Z=-1)}M=Z+F,R=Z+F+1}}M!==-1&&R!==-1&&M!==R&&t.setSelectionRange(M,R,O)}const le=M!==-1?M:d,re=R!==-1?R:C,Se=O??K;f.value=le,b.value=re,B.prev=[le,re,Se]}if(x(),V?.activeElement===t&&(v.value=!0),!V?.getElementById("input-otp-style")){const d=V?.createElement("style");if(d.id="input-otp-style",V?.head.appendChild(d),d.sheet){const C="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";k(d.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),k(d.sheet,`[data-input-otp]:autofill { ${C} }`),k(d.sheet,`[data-input-otp]:-webkit-autofill { ${C} }`),k(d.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),k(d.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}const w=()=>{e&&e.style.setProperty("--root-height",`${t.clientHeight}px`)};w();const A=new ResizeObserver(w);A.observe(t),me(()=>{s(),A.disconnect()})}),fe([a],()=>{Ke(()=>{if(!l.value)return;l.value?.dispatchEvent(new Event("input"));const t=l.value?.selectionStart,e=l.value?.selectionEnd,s=l.value?.selectionDirection;t!==null&&e!==null&&(f.value=t??null,b.value=e??null,B.prev=[t,e,s])})},{immediate:!0}),Be(()=>{r.value!==void 0&&a.value!==r.value&&r.value.length<o.maxlength&&a.value.length===o.maxlength&&i("complete",a.value)});const E=Ye({containerRef:_,inputRef:l,pushPasswordManagerStrategy:o.pushPasswordManagerStrategy,isFocused:v});function N(t){if(t.inputType==="insertText"&&t.data!==null){const e=t.currentTarget,s=e.selectionStart??0,x=e.selectionEnd??0,w=e.value,A=(s!==x?w.slice(0,s)+t.data+w.slice(x):w.slice(0,s)+t.data+w.slice(s)).slice(0,o.maxlength);A.length>0&&p.value&&!p.value.test(A)&&t.preventDefault()}}function I(t){const e=t.currentTarget.value.slice(0,o.maxlength);if(e.length>0&&p.value&&!p.value.test(e)){t.preventDefault();return}typeof r.value=="string"&&e.length<r.value.length&&V?.dispatchEvent(new Event("selectionchange")),a.value=e,i("input",e)}function Y(){const t=l.value;if(t){const e=Math.min(t.value.length,o.maxlength-1),s=t.value.length;t.setSelectionRange(e,s),f.value=e,b.value=s}v.value=!0}function Q(t){const e=l.value;if(!e||!o.pasteTransformer&&(!T||!t.clipboardData||!e))return;const s=t?.clipboardData?.getData("text/plain"),x=o?.pasteTransformer?o.pasteTransformer(s):s;t.preventDefault();const w=l.value?.selectionStart,A=l.value?.selectionEnd,d=(w!==A?a.value.slice(0,w)+x+a.value.slice(A):a.value.slice(0,w)+x+a.value.slice(w)).slice(0,o.maxlength);if(d.length>0&&p.value&&!p.value.test(d))return;a.value=d,i("input",d);const C=Math.min(d.length,o.maxlength-1),K=d.length;e?.setSelectionRange(C,K),f.value=C,b.value=K}const _e=ae(J(o,"containerClass","value","pattern","defaultValue","pushPasswordManagerStrategy","noScriptCssFallback","modelValue")),xe=D(()=>({position:"relative",cursor:o.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),we=D(()=>({position:"absolute",inset:0,width:E.willPushPWMBadge.value?`calc(100% + ${E.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:E.willPushPWMBadge.value?`inset(0 ${E.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o.textAlign,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),se=D(()=>({slots:Array.from({length:Number(o.maxlength)}).map((t,e)=>{const s=v.value&&f.value!==null&&b.value!==null&&(f.value===b.value&&e===f.value||e>=f.value&&e<b.value),x=a.value[e]!==void 0?a.value[e]:null;return{char:x,placeholderChar:x??o?.placeholder?.[e]??null,isActive:s,hasFakeCaret:s&&x===null}}),isFocused:v.value,isHovering:!o.disabled&&h.value}));return Ee(he,se),m(Object.defineProperty({},"$el",{enumerable:!0,configurable:!0,get:()=>l})),(t,e)=>(S(),q(ge,null,[n.noScriptCssFallback!==null?(S(),G(u(qe),{key:0,fallback:n.noScriptCssFallback},null,8,["fallback"])):ve("v-if",!0),g("div",{ref_key:"containerRef",ref:_,"data-input-otp-container":"",style:Me(xe.value),class:Ae(n.containerClass)},[ne(t.$slots,"default",{slots:se.value.slots,isFocused:v.value,isHovering:!n.disabled&&h.value}),g("div",Qe,[g("input",L({ref_key:"inputRef",ref:l,value:u(a),"data-input-otp":"","data-input-otp-placeholder-shown":u(a).length===0||void 0,"data-input-otp-mss":f.value,"data-input-otp-mse":b.value,"aria-placeholder":n.placeholder,style:we.value,pattern:p.value?.source},{...t.$attrs,...u(_e)},{onBeforeinput:N,onMouseover:e[0]||(e[0]=s=>{h.value=!0,i("mouseover",s)}),onMouseleave:e[1]||(e[1]=s=>{h.value=!1,i("mouseleave",s)}),onPaste:e[2]||(e[2]=s=>{Q(s),i("paste",s)}),onInput:I,onFocus:e[3]||(e[3]=s=>{Y(),i("focus",s)}),onBlur:e[4]||(e[4]=s=>{v.value=!1,i("blur",s)})}),null,16,Ze)])],6)],64))}});var tt=et;function nt(){return Re(he)}const ot=z({__name:"InputOTP",props:{maxlength:{},textAlign:{},inputmode:{},containerClass:{},pushPasswordManagerStrategy:{},noScriptCssFallback:{},defaultValue:{},pasteTransformer:{type:Function},accept:{},alt:{},autocomplete:{},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{},class:{}},emits:["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],setup(n,{emit:m}){const c=n,o=m,i=J(c,"class"),a=Oe(i,o);return(r,p)=>(S(),G(u(tt),L(u(a),{"container-class":u(oe)("flex items-center gap-2 has-disabled:opacity-50",c.class),"data-slot":"input-otp",class:"disabled:cursor-not-allowed"}),{default:$(h=>[ne(r.$slots,"default",Fe(Ve(h)))]),_:3},16,["container-class"]))}}),at=z({__name:"InputOTPGroup",props:{class:{}},setup(n){const m=n,c=J(m,"class"),o=ae(c);return(i,a)=>(S(),q("div",L({"data-slot":"input-otp-group"},u(o),{class:u(oe)("flex items-center",m.class)}),[ne(i.$slots,"default")],16))}}),st=["data-active"],lt={key:0,class:"pointer-events-none absolute inset-0 flex items-center justify-center"},rt=z({__name:"InputOTPSlot",props:{index:{},class:{}},setup(n){const m=n,c=J(m,"class"),o=ae(c),i=nt(),a=D(()=>i?.value.slots[m.index]);return(r,p)=>(S(),q("div",L(u(o),{"data-slot":"input-otp-slot","data-active":a.value?.isActive,class:u(oe)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",m.class)}),[ee(te(a.value?.char)+" ",1),a.value?.hasFakeCaret?(S(),q("div",lt,[...p[0]||(p[0]=[g("div",{class:"animate-caret-blink bg-foreground h-4 w-px duration-1000"},null,-1)])])):ve("",!0)],16,st))}}),y=n=>({url:y.url(n),method:"post"});y.definition={methods:["post"],url:"/two-factor-challenge"};y.url=n=>y.definition.url+Ne(n);y.post=n=>({url:y.url(n),method:"post"});const be=n=>({action:y.url(n),method:"post"});be.post=n=>({action:y.url(n),method:"post"});y.form=be;Object.assign(y,y);const it={class:"space-y-6"},ut=["value"],ct={class:"flex flex-col items-center justify-center space-y-3 text-center"},dt={class:"flex w-full items-center justify-center"},pt={class:"text-center text-sm text-muted-foreground"},mt=["onClick"],ft={class:"text-center text-sm text-muted-foreground"},vt=["onClick"],kt=z({__name:"TwoFactorChallenge",setup(n){const m=D(()=>c.value?{title:"Recovery Code",description:"Please confirm access to your account by entering one of your emergency recovery codes.",buttonText:"login using an authentication code"}:{title:"Authentication Code",description:"Enter the authentication code provided by your authenticator application.",buttonText:"login using a recovery code"}),c=j(!1),o=a=>{c.value=!c.value,a(),i.value=""},i=j("");return(a,r)=>(S(),G(ze,{title:m.value.title,description:m.value.description},{default:$(()=>[P(u(De),{title:"Two-Factor Authentication"}),g("div",it,[c.value?(S(),G(u(ue),L({key:1},u(y).form(),{class:"space-y-4","reset-on-error":""}),{default:$(({errors:p,processing:h,clearErrors:v})=>[P(u(We),{name:"recovery_code",type:"text",placeholder:"Enter recovery code",autofocus:c.value,required:""},null,8,["autofocus"]),P(ce,{message:p.recovery_code},null,8,["message"]),P(u(de),{type:"submit",class:"w-full",disabled:h},{default:$(()=>[...r[4]||(r[4]=[ee("Continue",-1)])]),_:1},8,["disabled"]),g("div",ft,[r[5]||(r[5]=g("span",null,"or you can ",-1)),g("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:()=>o(v)},te(m.value.buttonText),9,vt)])]),_:1},16)):(S(),G(u(ue),L({key:0},u(y).form(),{class:"space-y-4","reset-on-error":"",onError:r[1]||(r[1]=p=>i.value="")}),{default:$(({errors:p,processing:h,clearErrors:v})=>[g("input",{type:"hidden",name:"code",value:i.value},null,8,ut),g("div",ct,[g("div",dt,[P(u(ot),{id:"otp",modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=f=>i.value=f),maxlength:6,disabled:h,autofocus:""},{default:$(()=>[P(u(at),null,{default:$(()=>[(S(),q(ge,null,Ie(6,f=>P(u(rt),{key:f,index:f-1},null,8,["index"])),64))]),_:1})]),_:1},8,["modelValue","disabled"])]),P(ce,{message:p.code},null,8,["message"])]),P(u(de),{type:"submit",class:"w-full",disabled:h},{default:$(()=>[...r[2]||(r[2]=[ee("Continue",-1)])]),_:1},8,["disabled"]),g("div",pt,[r[3]||(r[3]=g("span",null,"or you can ",-1)),g("button",{type:"button",class:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",onClick:()=>o(v)},te(m.value.buttonText),9,mt)])]),_:1},16))])]),_:1},8,["title","description"]))}});export{kt as default};
