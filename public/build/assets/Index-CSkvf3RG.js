import{d as R,H as V,c as a,a as s,u as t,h as W,w as o,b as n,f as d,o as i,p as m,g as b,F as E,E as h,v as j,j as z,r as x,I as F,J as X}from"./app-DrHXUj_w.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-D_TnovZe.js";import{_ as Z}from"./index-CF1u_FT8.js";import{_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CHERCCRP.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-BEkDPcb8.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-q2sD0DhG.js";import{_ as B,a as D,b as I,c as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5I83UkO.js";import"./index-3nVzOy6E.js";import"./VisuallyHidden-DiFExzsD.js";import"./useForwardExpose-l8w9yqD-.js";import"./useForwardPropsEmits-DR5ASvf6.js";import"./index-B26eXW15.js";import"./loader-circle-CXQ59b0Y.js";const ee={class:"flex flex-col gap-6 p-4"},te={class:"flex flex-wrap items-center justify-between gap-4"},se={key:0,class:"rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-200"},re={key:0},oe={key:1},ne={class:"grid gap-4"},le={class:"flex flex-wrap items-center justify-between gap-3"},ae={class:"flex items-center gap-3"},de={class:"text-base font-semibold"},ie={class:"flex flex-wrap gap-2"},ue={class:"mt-3 flex flex-wrap items-center gap-2"},pe={key:0,class:"text-xs text-muted-foreground"},me={key:1,class:"flex flex-wrap gap-2"},fe=["onClick"],ce=["onClick"],ve={key:0,class:"rounded-xl border border-sidebar-border/70 bg-white p-6 text-center text-sm text-muted-foreground dark:border-sidebar-border dark:bg-neutral-900"},_e={class:"grid gap-2"},xe={key:0,class:"text-sm text-red-600"},ge={class:"flex justify-end gap-2"},be={class:"grid gap-2"},ye={key:0,class:"text-sm text-red-600"},ke={class:"flex justify-end gap-2"},Ie=R({__name:"Index",setup(Ce){const T=X(),S=z(()=>T.props),g=z(()=>S.value.errors??{}),H=[{title:"Адмін",href:"/admin/users"},{title:"Типи витрат",href:"/admin/expense-types"}],c=x(!1),k=x(!1),C=x(null),v=x(!1),$=x(!1),y=x(null),w=x(null),u=V({name:""}),p=V({name:""}),J=()=>{k.value=!1,C.value=null,u.reset(),u.clearErrors(),c.value=!0},L=l=>{k.value=!0,C.value=l,u.name=l.name,u.clearErrors(),c.value=!0},M=()=>{if(k.value&&C.value){if(!window.confirm("Підтвердити оновлення типу витрат?"))return;u.put(`/admin/expense-types/${C.value.id}`,{preserveScroll:!0,onSuccess:()=>{c.value=!1}});return}u.post("/admin/expense-types",{preserveScroll:!0,onSuccess:()=>{c.value=!1,u.reset()}})},P=l=>{window.confirm("Видалити тип витрат?")&&F.delete(`/admin/expense-types/${l.id}`,{preserveScroll:!0})},q=l=>{$.value=!1,y.value=l,w.value=null,p.reset(),p.clearErrors(),v.value=!0},A=(l,e)=>{$.value=!0,y.value=l,w.value=e,p.name=e.name,p.clearErrors(),v.value=!0},G=()=>{if(y.value){if($.value&&w.value){if(!window.confirm("Підтвердити оновлення категорії?"))return;p.put(`/admin/expense-types/${y.value.id}/categories/${w.value.id}`,{preserveScroll:!0,onSuccess:()=>{v.value=!1}});return}p.post(`/admin/expense-types/${y.value.id}/categories`,{preserveScroll:!0,onSuccess:()=>{v.value=!1,p.reset()}})}},K=(l,e)=>{window.confirm("Видалити категорію?")&&F.delete(`/admin/expense-types/${l.id}/categories/${e.id}`,{preserveScroll:!0})};return(l,e)=>(i(),a(E,null,[s(t(W),{title:"Типи витрат"}),s(Y,{breadcrumbs:H},{default:o(()=>[n("div",ee,[n("div",te,[e[7]||(e[7]=n("div",null,[n("h1",{class:"text-xl font-semibold"},"Типи витрат"),n("p",{class:"text-sm text-muted-foreground"},"Налаштування типів та категорій витрат.")],-1)),s(t(f),{size:"sm",onClick:J},{default:o(()=>[...e[6]||(e[6]=[d("Створити тип",-1)])]),_:1})]),g.value.delete||g.value.delete_category?(i(),a("div",se,[g.value.delete?(i(),a("p",re,m(g.value.delete),1)):b("",!0),g.value.delete_category?(i(),a("p",oe,m(g.value.delete_category),1)):b("",!0)])):b("",!0),n("div",ne,[(i(!0),a(E,null,h(S.value.items,r=>(i(),a("div",{key:r.id,class:"rounded-xl border border-sidebar-border/70 bg-white p-4 dark:border-sidebar-border dark:bg-neutral-900"},[n("div",le,[n("div",ae,[n("h2",de,m(r.name),1),s(t(Z),{variant:"outline",class:"text-[11px]"},{default:o(()=>[d("Категорії: "+m(r.categories.length),1)]),_:2},1024)]),n("div",ie,[s(t(f),{size:"sm",variant:"outline",onClick:_=>L(r)},{default:o(()=>[...e[8]||(e[8]=[d("Редагувати",-1)])]),_:1},8,["onClick"]),s(t(f),{size:"sm",variant:"destructive",onClick:_=>P(r)},{default:o(()=>[...e[9]||(e[9]=[d("Видалити",-1)])]),_:1},8,["onClick"])])]),n("div",ue,[s(t(f),{size:"sm",variant:"secondary",class:"h-7 px-2 text-[11px]",onClick:_=>q(r)},{default:o(()=>[...e[10]||(e[10]=[d(" Додати категорію ",-1)])]),_:1},8,["onClick"]),r.categories.length===0?(i(),a("div",pe," Категорії відсутні. ")):(i(),a("div",me,[(i(!0),a(E,null,h(r.categories,_=>(i(),a("div",{key:_.id,class:"flex items-center gap-2 rounded-md border border-input px-2 py-1 text-[11px]"},[n("span",null,m(_.name),1),n("button",{type:"button",class:"text-muted-foreground hover:text-foreground",onClick:Q=>A(r,_)}," Ред. ",8,fe),n("button",{type:"button",class:"text-red-600 hover:text-red-700",onClick:Q=>K(r,_)}," Вид. ",8,ce)]))),128))]))])]))),128)),S.value.items.length===0?(i(),a("div",ve," Типи витрат відсутні. ")):b("",!0)])]),s(t(B),{open:c.value,"onUpdate:open":e[2]||(e[2]=r=>c.value=r)},{default:o(()=>[s(t(D),null,{default:o(()=>[s(t(I),null,{default:o(()=>[s(t(O),null,{default:o(()=>[d(m(k.value?"Редагувати тип":"Створити тип"),1)]),_:1})]),_:1}),n("form",{class:"mt-4 grid gap-4",onSubmit:j(M,["prevent"])},[n("div",_e,[s(t(U),null,{default:o(()=>[...e[11]||(e[11]=[d("Назва",-1)])]),_:1}),s(t(N),{modelValue:t(u).name,"onUpdate:modelValue":e[0]||(e[0]=r=>t(u).name=r)},null,8,["modelValue"]),t(u).errors.name?(i(),a("span",xe,m(t(u).errors.name),1)):b("",!0)]),n("div",ge,[s(t(f),{type:"button",variant:"ghost",onClick:e[1]||(e[1]=r=>c.value=!1)},{default:o(()=>[...e[12]||(e[12]=[d("Скасувати",-1)])]),_:1}),s(t(f),{type:"submit",disabled:t(u).processing},{default:o(()=>[...e[13]||(e[13]=[d("Зберегти",-1)])]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"]),s(t(B),{open:v.value,"onUpdate:open":e[5]||(e[5]=r=>v.value=r)},{default:o(()=>[s(t(D),null,{default:o(()=>[s(t(I),null,{default:o(()=>[s(t(O),null,{default:o(()=>[d(m($.value?"Редагувати категорію":"Створити категорію"),1)]),_:1})]),_:1}),n("form",{class:"mt-4 grid gap-4",onSubmit:j(G,["prevent"])},[n("div",be,[s(t(U),null,{default:o(()=>[...e[14]||(e[14]=[d("Назва",-1)])]),_:1}),s(t(N),{modelValue:t(p).name,"onUpdate:modelValue":e[3]||(e[3]=r=>t(p).name=r)},null,8,["modelValue"]),t(p).errors.name?(i(),a("span",ye,m(t(p).errors.name),1)):b("",!0)]),n("div",ke,[s(t(f),{type:"button",variant:"ghost",onClick:e[4]||(e[4]=r=>v.value=!1)},{default:o(()=>[...e[15]||(e[15]=[d("Скасувати",-1)])]),_:1}),s(t(f),{type:"submit",disabled:t(p).processing},{default:o(()=>[...e[16]||(e[16]=[d("Зберегти",-1)])]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Ie as default};
